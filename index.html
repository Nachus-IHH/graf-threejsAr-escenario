<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Beat Saber VR • Three.js (Beats)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style_beatsaber.css" />

    <!-- Importmap: Three.js + Addons -->
    <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.1/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.160.1/examples/jsm/"
      }
    }
    </script>
  </head>

  <body>
    <!-- Ambient audio (se atenúa durante la música) -->
    <audio id="ambient" src="assets/audio/forest_night.mp3" preload="auto" loop></audio>

    <!-- MENU: lista de canciones estilo osu! -->
    <div id="menu" class="menu-panel">
      <h2>Selecciona canción</h2>
      <div id="songList" class="song-list"></div>

      <div id="difficulties" style="display:none">
        <h3 id="selectedSongTitle"></h3>
        <div class="diff-row">
          <button class="diff-btn" data-diff="easy">Easy <span class="stars" data-stars="2"></span></button>
          <button class="diff-btn" data-diff="normal">Normal <span class="stars" data-stars="3"></span></button>
          <button class="diff-btn" data-diff="hard">Hard <span class="stars" data-stars="5"></span></button>
        </div>
      </div>

      <button id="startBtn">Iniciar</button>
    </div>

    <!-- HUD -->
    <div id="hud" class="hud-panel">
      Score: <span id="score">0</span> &nbsp; | &nbsp; Combo: <span id="combo">0</span>
    </div>

    <!-- Pausa / menú in-game -->
    <div id="pauseMenu" class="menu-panel" style="display:none;">
      <h2>Pausa</h2>
      <button id="resumeBtn">Continuar</button>
      <button id="restartBtn">Reiniciar</button>
      <button id="backMenuBtn">Volver al Menú</button>
    </div>

    <!-- Resultado final -->
    <div id="resultScreen" class="menu-panel" style="display:none;">
      <h2>Fin de la Canción</h2>
      <p>Score: <span id="finalScore">0</span></p>
      <p>Max Combo: <span id="finalCombo">0</span></p>
      <button id="resultRestartBtn">Reiniciar</button>
      <button id="resultMenuBtn">Volver al Menú</button>
    </div>

    <!-- Countdown overlay (3..2..1..GO) -->
    <div id="countdown" class="countdown" style="display:none;">3</div>

    <!-- Canvas principal -->
    <canvas id="scene"></canvas>

    <!-- Main script -->
    <script type="module" src="main_beatsaber.js"></script>
  </body>
</html>
